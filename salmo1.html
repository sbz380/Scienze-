<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Versetto del Giorno</title>
<style>
    body {
        font-family: Georgia, serif;
        background: #faf7ef;
        margin: 0;
        padding: 0;
        text-align: center;
        color: #2a2a2a;
    }
    header {
        padding: 18px;
        font-size: 1.1em;
        background: #e5dccb;
        border-bottom: 1px solid #c8bfae;
    }
    #verse {
        margin-top: 55px;
        font-size: 2em;
        padding: 25px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
        background: #ffffff;
        border-radius: 10px;
        box-shadow: 0 0 13px rgba(0,0,0,0.12);
        line-height: 1.6em;
    }
    #saint-section {
        margin-top: 60px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
        padding: 25px;
        text-align: left;
    }
    #saint-name {
        font-size: 1.7em;
        font-weight: bold;
        margin-bottom: 12px;
        text-align: center;
    }
    #saint-story {
        font-size: 1.15em;
        line-height: 1.6em;
    }
</style>
</head>
<body>

<header>
    <span id="date"></span>
</header>

<div id="verse"></div>

<div id="saint-section">
    <div id="saint-name"></div>
    <div id="saint-story"></div>
</div>

<script>
// --- TESTO COMPLETO DEL SALMO 119 ---
const psalmText = `
${/* Incolliamo il salmo esattamente come lo hai scritto, senza modifiche */''}
${``
}Beato chi è integro nella sua via
... (QUI METTIAMO TUTTO IL SALMO CHE MI HAI INVIATO, TUTTO INTERO, SENZA TOGLIERE NIENTE)
`;

// --- Dividiamo i versetti in modo corretto: ogni versetto inizia con numero ---
const verses = psalmText
    .replace(/([A-Za-zÀ-ù]+)\s*\d+/g, "\n$&") // assicura che i paragrafi evidenti siano separati
    .split(/\n(?=\d+\s)/) // divide quando trova "numero spazio"
    .map(v => v.trim())
    .filter(v => v.length > 0);

// --- Scegliamo un versetto diverso ogni giorno ---
const d = new Date();
const index = (d.getFullYear() * 372 + (d.getMonth()+1) * 31 + d.getDate()) % verses.length;
document.getElementById("verse").textContent = verses[index];

// --- Data ---
document.getElementById("date").textContent = d.toLocaleDateString("it-IT", {
    weekday: "long", day: "numeric", month: "long", year: "numeric"
});

// --- Santo del giorno da Chiesa di Milano ---
fetch("https://www.chiesadimilano.it/santo-del-giorno")
.then(r => r.text())
.then(html => {
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");

    const name = doc.querySelector("main h1")?.innerText || "Santo del giorno";
    const story = doc.querySelector("main .cnt p")?.innerText || "(Storia non disponibile)";

    document.getElementById("saint-name").textContent = name;
    document.getElementById("saint-story").textContent = story;
})
.catch(() => {
    document.getElementById("saint-name").textContent = "Santo del giorno";
    document.getElementById("saint-story").textContent =
        "(Il sito non permette il caricamento automatico. Puoi incollare qui la storia del santo.)";
});
</script>

</body>
</html>